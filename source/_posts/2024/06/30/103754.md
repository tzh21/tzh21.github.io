---
title: "ADVANCING BEYOND IDENTIFICATION:
MULTI-BIT WATERMARK FOR LARGE LANGUAGE MODELS 论文笔记"
date: 2024-06-30 10:37:54
tags:
---

## 嵌入水印

![](103754/image.png)

将整个单词表划分成 r 份。

我们的目标是将一段水印信息嵌入到生成的文本中。将这段水印信息编码为长度为 b，每位取值为 $\{0,...,r-1\}$ 的串。记这个编码串为 m。

生成一个 token 时，随机取 $\{0,...,b-1\}$ 中的一个数 p。倾向于从 $m[p]$ 单词表中选 token。

## 检测水印

m 中不同位置有不同数字，代表不同词汇表子集。数字出现的频率分布和词汇的分布正相关。假如 m 中很多位置的值都是 3，那么最后生成的文本中很多 token 都来自于第 3 个词汇表子集。可以通过检测词频来判断是否存在水印。

为 m 中每个位置 i 维护 r 个计数器 $\{W_i[0],...,W_i[r-1]\}$。如果一个 token 对应 m 中的位置 i，且位于 j 词汇表时，$W_i[j]$ 加 1。如果该文本中有水印，那么使得 $W_i$ 最大的词汇表 j 应该为 $m[i]$ 词汇表。

什么情况下，$W_i[m[i]]$ 以外的计数器有值？token 的颜色和对应 m 位置的颜色不匹配，即使增加了 $\delta$，仍然没有从对应颜色中选词（比如低熵文本）。
